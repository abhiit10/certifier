<HTML>
    <HEAD>
        <SCRIPT>var isomorphicDir="../isomorphic/";</SCRIPT>
        <SCRIPT SRC=../isomorphic/system/modules/ISC_Core.js></SCRIPT>
        <SCRIPT SRC=../isomorphic/system/modules/ISC_Foundation.js></SCRIPT>
        <SCRIPT SRC=../isomorphic/system/modules/ISC_Containers.js></SCRIPT>
        <SCRIPT SRC=../isomorphic/system/modules/ISC_Grids.js></SCRIPT>
        <SCRIPT SRC=../isomorphic/system/modules/ISC_Forms.js></SCRIPT>
        <SCRIPT SRC=../isomorphic/system/modules/ISC_DataBinding.js></SCRIPT>
        <SCRIPT SRC=../isomorphic/skins/TreeFrog/load_skin.js></SCRIPT>
    </HEAD>
    <BODY>
        <SCRIPT>
            isc.RestDataSource.create({
                ID:"countryDS",
                fields:[
                    {
                        name:"continent", 
                        title:"Continent", 
                        type: "text"
                    },
                    {
                        name:"countryName", 
                        title:"Country", 
                        type: "text"
                    },
                    {
                        name:"countryCode", 
                        title:"Code", 
                        primaryKey:true, 
                        canEdit:false, 
                        type: "text"
                    },
                    {
                        name:"area", 
                        title:"Area", 
                        type: "integer"
                    },
                    {
                        name:"population", 
                        title:"Population", 
                        type: "integer"
                    },
                    {
                        name:"gdp", 
                        title:"Gdp", 
                        type: "float"
                    },
                    {
                        name:"independence", 
                        title:"Independence", 
                        type: "date"
                    },
                    {
                        name:"government", 
                        title:"Government", 
                        type: "text"
                    },
                    {
                        name:"government_desc", 
                        title:"Government desc", 
                        type: "integer"
                    },
                    {
                        name:"capital", 
                        title:"Capital", 
                        type: "text"
                    },
                    {
                        name:"member_g8", 
                        title:"Member g8", 
                        type: "boolean"
                    },
                    {
                        name:"article", 
                        title:"Article", 
                        type: "link"
                    }
                ],
                
                dataFormat: "json",
                dataURL:"/quiz-app/RestDataSourceJson/data/dataIntegration/json/responses/country_fetch_rest.js"
//                 fetchDataURL:"/quiz-app/RestDataSourceJson/data/dataIntegration/json/responses/country_fetch_rest.js",
//                 addDataURL :"/quiz-app/RestDataSourceJson/data/dataIntegration/json/responses/country_add_rest.js",
//                 updateDataURL:"/quiz-app/RestDataSourceJson/data/dataIntegration/json/responses/country_update_rest.js",
//                 removeDataURL:"/quiz-app/RestDataSourceJson/data/dataIntegration/json/responses/country_remove_rest.js"


            });
               
            isc.ListGrid.create({
                ID: "countryList",
                width:"100%", 
                height:440,
                margin:20,
                dataSource: countryDS,
                showFilterEditor: true,
                autoFetchData:true,
                canEdit:true,
                editEvent: "click"
            });

            isc.IButton.create({
                left:20, 
                top:430, 
                width:150,
                title:"Add new country",
                click: function () {
                    countryList.addData(
                        {
                            countryCode: "A1",
                            countryName: "New Value",
                            capital:"New Value",
                            continent:"New Value"
                        }, function(dsResponse,data,dsRequest){
									isc.say('value has been added');
                            }
                    );
                    this.disable();
                }
            });

            isc.IButton.create({
                left:180, 
                top:430,
                width:150,
                title:"Update country (US)",
                click: function () {
                    countryList.updateData(
                        {
                            countryCode: "US",
                            countryName:"Edited Value",
                            capital:"Edited Value",
                            continent:"Edited Value"
                        }, function(dsResponse,data,dsRequest){
							isc.say('US has been updated');
                        }
                    );
                    countryList.selection.selectSingle(
                        {
                            countryCode:"US"
                        }
                    );
                    this.disable();
                }
            });

            isc.IButton.create({
                left:340, 
                top:430, 
                width:150,
                title:"Remove country (UK)",        
                click: function () {
                    countryList.removeData(
                        {
                            countryCode: "UK"
                        }, function(dsResponse,data,dsRequest){
							isc.say('UK has been deleted');
                        }
                    );
                    this.disable();
                }
            });
        </SCRIPT>
    </BODY>
</HTML>
